import{g as Nt,O as Dn,n as In,t as Mn,c as jt,r as m,u as Nn,w as jn,a as me,b as ve,L as dt,R as pt,D as $t,B as he,d as Ut,i as mt,e as se,f as Bt,h as be,j as pe,k as oe,l as $n,_ as Un,m as ht,o as Bn,p as Vn,q as Hn,s as Kn,v as qn,x as zn,y as Wn,z as Gn,A as Qn,C as b,T as Yn,E as gt,F as Jn,S as Xn,P as Zn,G as er,H as Vt,I as Ht,J as tr,K as Ie,M as nr,N as Ke,Q as rr,U as ge,V as vt,W,X as or,Y as _e,Z as Kt,$ as sr,a0 as bt,a1 as ar,a2 as z,a3 as ir,a4 as cr,a5 as Z,a6 as qt,a7 as ur,a8 as lr,a9 as fr,aa as dr,ab as G,ac as D,ad as pr,ae as mr,af as hr,ag as gr,ah as zt,ai as vr,aj as br,ak as _r,al as yr,am as ye,an as Er,ao as wr,ap as Tr,aq as Wt,ar as xr,as as Cr,at as Sr,au as Gt,av as kr,aw as Qt,ax as _t,ay as Lr,az as Ar,aA as Fr,aB as Pr,aC as Ee,aD as Rr,aE as Or,aF as Dr,aG as Ir,aH as Yt,aI as Mr,aJ as Pe,aK as Nr,aL as jr,aM as $r,aN as Me,aO as Jt,aP as Ne,aQ as Ur,aR as Br,aS as Vr,aT as Hr,aU as Kr,aV as qr,aW as yt}from"./index.CDGe6IN2.js";function zr(e,t){return Nt(e).find(({type:n})=>n===t)}function Wr({start:e,end:t,replacements:n,text:r}){if(!(e+1!==t||r[e]!==Dn))return n[e]}function ae({start:e,end:t}){if(!(e===void 0||t===void 0))return e===t}function je({text:e}){return e.length===0}function Gr(e,t,n=e.start,r=e.end){var i,c,u;const{formats:o,activeFormats:s}=e,a=o.slice();if(n===r){const l=(i=a[n])==null?void 0:i.find(({type:p})=>p===t);if(l){for(;(c=a[n])!=null&&c.find(p=>p===l);)Re(a,n,t),n--;for(r++;(u=a[r])!=null&&u.find(p=>p===l);)Re(a,r,t),r++}}else for(let l=n;l<r;l++)a[l]&&Re(a,l,t);return In({...e,formats:a,activeFormats:(s==null?void 0:s.filter(({type:l})=>l!==t))||[]})}function Re(e,t,n){const r=e[t].filter(({type:o})=>o!==n);r.length?e[t]=r:delete e[t]}function $e(e,t=e.start,n=e.end){const{formats:r,replacements:o,text:s}=e;return t===void 0||n===void 0?{...e}:{formats:r.slice(t,n),replacements:o.slice(t,n),text:s.slice(t,n)}}function Qr({formats:e,replacements:t,text:n,start:r,end:o},s){return Yr(...arguments)}function Yr({formats:e,replacements:t,text:n,start:r,end:o},s=r,a=o){if(r===void 0||o===void 0)return;const i={formats:e.slice(0,s),replacements:t.slice(0,s),text:n.slice(0,s)},c={formats:e.slice(a),replacements:t.slice(a),text:n.slice(a),start:0,end:0};return[i,c]}function Xt(e,t){return e===t||e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}const Oe="http://www.w3.org/1998/Math/MathML";function Ue(e,t,n){const r=e.parentNode;let o=0;for(;e=e.previousSibling;)o++;return n=[o,...n],r!==t&&(n=Ue(r,t,n)),n}function Et(e,t){for(t=[...t];e&&t.length>1;)e=e.childNodes[t.shift()];return{node:e,offset:t[0]}}function Jr(e,t){if(t.html!==void 0)return e.innerHTML+=t.html;typeof t=="string"&&(t=e.ownerDocument.createTextNode(t));const{type:n,attributes:r}=t;if(n)if(n==="#comment")t=e.ownerDocument.createComment(r["data-rich-text-comment"]);else{const o=e.namespaceURI;n==="math"?t=e.ownerDocument.createElementNS(Oe,n):o===Oe?e.tagName==="MTEXT"?t=e.ownerDocument.createElement(n):t=e.ownerDocument.createElementNS(Oe,n):t=e.ownerDocument.createElement(n);for(const s in r)t.setAttribute(s,r[s])}return e.appendChild(t)}function Xr(e,t){e.appendData(t)}function Zr({lastChild:e}){return e}function eo({parentNode:e}){return e}function to(e){return e.nodeType===e.TEXT_NODE}function no({nodeValue:e}){return e}function ro(e){return e.parentNode.removeChild(e)}function oo({value:e,prepareEditableTree:t,isEditableTree:n=!0,placeholder:r,doc:o=document}){let s=[],a=[];return t&&(e={...e,formats:t(e)}),{body:Mn({value:e,createEmpty:()=>jt(o,""),append:Jr,getLastChild:Zr,getParent:eo,isText:to,getText:no,remove:ro,appendText:Xr,onStartIndex(u,l){s=Ue(l,u,[l.nodeValue.length])},onEndIndex(u,l){a=Ue(l,u,[l.nodeValue.length])},isEditableTree:n,placeholder:r}),selection:{startPath:s,endPath:a}}}function so({value:e,current:t,prepareEditableTree:n,__unstableDomOnly:r,placeholder:o}){const{body:s,selection:a}=oo({value:e,prepareEditableTree:n,placeholder:o,doc:t.ownerDocument});Zt(s,t),e.start!==void 0&&!r&&ao(a,t)}function Zt(e,t){let n=0,r;for(;r=e.firstChild;){const o=t.childNodes[n];if(!o)t.appendChild(r);else if(o.isEqualNode(r))e.removeChild(r);else if(o.nodeName!==r.nodeName||o.nodeType===o.TEXT_NODE&&o.data!==r.data)t.replaceChild(r,o);else{const s=o.attributes,a=r.attributes;if(s){let i=s.length;for(;i--;){const{name:c}=s[i];r.getAttribute(c)||o.removeAttribute(c)}}if(a)for(let i=0;i<a.length;i++){const{name:c,value:u}=a[i];o.getAttribute(c)!==u&&o.setAttribute(c,u)}Zt(r,o),e.removeChild(r)}n++}for(;t.childNodes[n];)t.removeChild(t.childNodes[n])}function ao({startPath:e,endPath:t},n){const{node:r,offset:o}=Et(n,e),{node:s,offset:a}=Et(n,t),{ownerDocument:i}=n,{defaultView:c}=i,u=c.getSelection(),l=i.createRange();l.setStart(r,o),l.setEnd(s,a);const{activeElement:p}=i;if(u.rangeCount>0){if(Xt(l,u.getRangeAt(0)))return;u.removeAllRanges()}u.addRange(l),p!==i.activeElement&&p instanceof c.HTMLElement&&p.focus()}function io(e,t,n,r){let o=e.startContainer;if(o.nodeType===o.TEXT_NODE&&e.startOffset===o.length&&o.nextSibling)for(o=o.nextSibling;o.firstChild;)o=o.firstChild;if(o.nodeType!==o.ELEMENT_NODE&&(o=o.parentElement),!o||o===t||!t.contains(o))return;const s=n+(r?"."+r:"");for(;o!==t;){if(o.matches(s))return o;o=o.parentElement}}function co(e,t){return{contextElement:t,getBoundingClientRect(){return t.contains(e.startContainer)?e.getBoundingClientRect():t.getBoundingClientRect()}}}function De(e,t,n){if(!e)return;const{ownerDocument:r}=e,{defaultView:o}=r,s=o.getSelection();if(!s||!s.rangeCount)return;const a=s.getRangeAt(0);if(!a||!a.startContainer)return;const i=io(a,e,t,n);return i||co(a,e)}function uo({editableContentElement:e,settings:t={}}){const{tagName:n,className:r,isActive:o}=t,[s,a]=m.useState(()=>De(e,n,r)),i=Nn(o);return m.useLayoutEffect(()=>{if(!e)return;function c(){a(De(e,n,r))}function u(){p.addEventListener("selectionchange",c)}function l(){p.removeEventListener("selectionchange",c)}const{ownerDocument:p}=e;return(e===p.activeElement||!i&&o||i&&!o)&&(a(De(e,n,r)),u()),e.addEventListener("focusin",u),e.addEventListener("focusout",l),()=>{l(),e.removeEventListener("focusin",u),e.removeEventListener("focusout",l)}},[e,n,r,o,i]),s}const lo="pre-wrap",fo="1px";function po(){return m.useCallback(e=>{e&&(e.style.whiteSpace=lo,e.style.minWidth=fo)},[])}function mo({record:e}){const t=m.useRef(),{activeFormats:n=[],replacements:r,start:o}=e.current,s=r[o];return m.useEffect(()=>{if((!n||!n.length)&&!s)return;const a="*[data-rich-text-format-boundary]",i=t.current.querySelector(a);if(!i)return;const{ownerDocument:c}=i,{defaultView:u}=c,l=u.getComputedStyle(i),p=jn(l.color).alpha(.2).toRgbString(),f=`.rich-text:focus ${a}`,h=`background-color: ${p}`,d=`${f} {${h}}`,g="rich-text-boundary-style";let y=c.getElementById(g);y||(y=c.createElement("style"),y.id=g,c.head.appendChild(y)),y.innerHTML!==d&&(y.innerHTML=d)},[n,s]),t}var ho=e=>t=>{function n(o){const{record:s}=e.current,{ownerDocument:a}=t;if(ae(s.current)||!t.contains(a.activeElement))return;const i=$e(s.current),c=me(i),u=ve({value:i});o.clipboardData.setData("text/plain",c),o.clipboardData.setData("text/html",u),o.clipboardData.setData("rich-text","true"),o.preventDefault(),o.type==="cut"&&a.execCommand("delete")}const{defaultView:r}=t.ownerDocument;return r.addEventListener("copy",n),r.addEventListener("cut",n),()=>{r.removeEventListener("copy",n),r.removeEventListener("cut",n)}},go=()=>e=>{function t(r){const{target:o}=r;if(o===e||o.textContent&&o.isContentEditable)return;const{ownerDocument:s}=o,{defaultView:a}=s,i=a.getSelection();if(i.containsNode(o))return;const c=s.createRange(),u=o.isContentEditable?o:o.closest("[contenteditable]");c.selectNode(u),i.removeAllRanges(),i.addRange(c),r.preventDefault()}function n(r){r.relatedTarget&&!e.contains(r.relatedTarget)&&r.relatedTarget.tagName==="A"&&t(r)}return e.addEventListener("click",t),e.addEventListener("focusin",n),()=>{e.removeEventListener("click",t),e.removeEventListener("focusin",n)}};const wt=[];var vo=e=>t=>{function n(r){const{keyCode:o,shiftKey:s,altKey:a,metaKey:i,ctrlKey:c}=r;if(s||a||i||c||o!==dt&&o!==pt)return;const{record:u,applyRecord:l,forceRender:p}=e.current,{text:f,formats:h,start:d,end:g,activeFormats:y=[]}=u.current,_=ae(u.current),{ownerDocument:E}=t,{defaultView:v}=E,{direction:T}=v.getComputedStyle(t),A=T==="rtl"?pt:dt,w=r.keyCode===A;if(_&&y.length===0&&(d===0&&w||g===f.length&&!w)||!_)return;const P=h[d-1]||wt,I=h[d]||wt,$=w?P:I,x=y.every((B,j)=>B===$[j]);let R=y.length;if(x?R<$.length&&R++:R--,R===y.length){u.current._newActiveFormats=$;return}r.preventDefault();const C=(x?$:w?I:P).slice(0,R),S={...u.current,activeFormats:C};u.current=S,l(S),p()}return t.addEventListener("keydown",n),()=>{t.removeEventListener("keydown",n)}},bo=e=>t=>{function n(r){const{keyCode:o}=r,{createRecord:s,handleChange:a}=e.current;if(r.defaultPrevented||o!==$t&&o!==he)return;const i=s(),{start:c,end:u,text:l}=i;c===0&&u!==0&&u===l.length&&(a(Ut(i)),r.preventDefault())}return t.addEventListener("keydown",n),()=>{t.removeEventListener("keydown",n)}};function _o({value:e,start:t,end:n,formats:r}){const o=Math.min(t,n),s=Math.max(t,n),a=e.formats[o-1]||[],i=e.formats[s]||[];for(e.activeFormats=r.map((c,u)=>{if(a[u]){if(mt(c,a[u]))return a[u]}else if(i[u]&&mt(c,i[u]))return i[u];return c});--n>=t;)e.activeFormats.length>0?e.formats[n]=e.activeFormats:delete e.formats[n];return e}const yo=new Set(["insertParagraph","insertOrderedList","insertUnorderedList","insertHorizontalRule","insertLink"]),Tt=[],en="data-rich-text-placeholder";function Eo(e){const t=e.getSelection(),{anchorNode:n,anchorOffset:r}=t;if(n.nodeType!==n.ELEMENT_NODE)return;const o=n.childNodes[r];!o||o.nodeType!==o.ELEMENT_NODE||!o.hasAttribute(en)||t.collapseToStart()}var wo=e=>t=>{const{ownerDocument:n}=t,{defaultView:r}=n;let o=!1;function s(l){if(o)return;let p;l&&(p=l.inputType);const{record:f,applyRecord:h,createRecord:d,handleChange:g}=e.current;if(p&&(p.indexOf("format")===0||yo.has(p))){h(f.current);return}const y=d(),{start:_,activeFormats:E=[]}=f.current,v=_o({value:y,start:_,end:y.start,formats:E});g(v)}function a(){const{record:l,applyRecord:p,createRecord:f,onSelectionChange:h}=e.current;if(t.contentEditable!=="true")return;if(n.activeElement!==t){n.removeEventListener("selectionchange",a);return}if(o)return;const{start:d,end:g,text:y}=f(),_=l.current;if(y!==_.text){s();return}if(d===_.start&&g===_.end){_.text.length===0&&d===0&&Eo(r);return}const E={..._,start:d,end:g,activeFormats:_._newActiveFormats,_newActiveFormats:void 0},v=Nt(E,Tt);E.activeFormats=v,l.current=E,p(E,{domOnly:!0}),h(d,g)}function i(){var l;o=!0,n.removeEventListener("selectionchange",a),(l=t.querySelector(`[${en}]`))==null||l.remove()}function c(){o=!1,s({inputType:"insertText"}),n.addEventListener("selectionchange",a)}function u(){const{record:l,isSelected:p,onSelectionChange:f,applyRecord:h}=e.current;t.parentElement.closest('[contenteditable="true"]')||(p?h(l.current,{domOnly:!0}):l.current={...l.current,start:void 0,end:void 0,activeFormats:Tt},f(l.current.start,l.current.end),window.queueMicrotask(a),n.addEventListener("selectionchange",a))}return t.addEventListener("input",s),t.addEventListener("compositionstart",i),t.addEventListener("compositionend",c),t.addEventListener("focus",u),()=>{t.removeEventListener("input",s),t.removeEventListener("compositionstart",i),t.removeEventListener("compositionend",c),t.removeEventListener("focus",u)}},To=()=>e=>{const{ownerDocument:t}=e,{defaultView:n}=t,r=n==null?void 0:n.getSelection();let o;function s(){return r.rangeCount?r.getRangeAt(0):null}function a(i){const c=i.type==="keydown"?"keyup":"pointerup";function u(){t.removeEventListener(c,l),t.removeEventListener("selectionchange",u),t.removeEventListener("input",u)}function l(){u(),!Xt(o,s())&&t.dispatchEvent(new Event("selectionchange"))}t.addEventListener(c,l),t.addEventListener("selectionchange",u),t.addEventListener("input",u),o=s()}return e.addEventListener("pointerdown",a),e.addEventListener("keydown",a),()=>{e.removeEventListener("pointerdown",a),e.removeEventListener("keydown",a)}};function xo(){return e=>{const{ownerDocument:t}=e,{defaultView:n}=t;let r=null;function o(a){a.defaultPrevented||a.target!==e&&a.target.contains(e)&&(r=e.getAttribute("contenteditable"),e.setAttribute("contenteditable","false"),n.getSelection().removeAllRanges())}function s(){r!==null&&(e.setAttribute("contenteditable",r),r=null)}return n.addEventListener("pointerdown",o),n.addEventListener("pointerup",s),()=>{n.removeEventListener("pointerdown",o),n.removeEventListener("pointerup",s)}}}const Co=[ho,go,vo,bo,wo,To,xo];function So(e){const t=m.useRef(e);m.useInsertionEffect(()=>{t.current=e});const n=m.useMemo(()=>Co.map(r=>r(t)),[t]);return se(r=>{const o=n.map(s=>s(r));return()=>{o.forEach(s=>s())}},[n])}function ko({value:e="",selectionStart:t,selectionEnd:n,placeholder:r,onSelectionChange:o,preserveWhiteSpace:s,onChange:a,__unstableDisableFormats:i,__unstableIsSelected:c,__unstableDependencies:u=[],__unstableAfterParse:l,__unstableBeforeSerialize:p,__unstableAddInvisibleFormats:f}){const h=Bt(),[,d]=m.useReducer(()=>({})),g=m.useRef();function y(){const{ownerDocument:{defaultView:x}}=g.current,R=x.getSelection(),N=R.rangeCount>0?R.getRangeAt(0):null;return oe({element:g.current,range:N,__unstableIsEditableTree:!0})}function _(x,{domOnly:R}={}){so({value:x,current:g.current,prepareEditableTree:f,__unstableDomOnly:R,placeholder:r})}const E=m.useRef(e),v=m.useRef();function T(){E.current=e,v.current=e,e instanceof pe||(v.current=e?pe.fromHTMLString(e,{preserveWhiteSpace:s}):pe.empty()),v.current={text:v.current.text,formats:v.current.formats,replacements:v.current.replacements},i&&(v.current.formats=Array(e.length),v.current.replacements=Array(e.length)),l&&(v.current.formats=l(v.current)),v.current.start=t,v.current.end=n}const A=m.useRef(!1);v.current?(t!==v.current.start||n!==v.current.end)&&(A.current=c,v.current={...v.current,start:t,end:n,activeFormats:void 0}):(A.current=c,T());function w(x){if(v.current=x,_(x),i)E.current=x.text;else{const S=p?p(x):x.formats;x={...x,formats:S},typeof e=="string"?E.current=ve({value:x,preserveWhiteSpace:s}):E.current=new pe(x)}const{start:R,end:N,formats:U,text:C}=v.current;h.batch(()=>{o(R,N),a(E.current,{__unstableFormats:U,__unstableText:C})}),d()}function P(){var C;const x=E.current;T();const R=x&&typeof x=="string"&&typeof e=="string"&&x.length!==e.length,N=(C=g.current)==null?void 0:C.contains(g.current.ownerDocument.activeElement),U=R&&!N;_(v.current,{domOnly:U})}const I=m.useRef(!1);m.useLayoutEffect(()=>{I.current&&e!==E.current&&(P(),d())},[e]),m.useLayoutEffect(()=>{A.current&&(g.current.ownerDocument.activeElement!==g.current&&g.current.focus(),_(v.current),A.current=!1)},[A.current]);const $=be([g,po(),mo({record:v}),So({record:v,handleChange:w,applyRecord:_,createRecord:y,isSelected:c,onSelectionChange:o,forceRender:d}),se(()=>{P(),I.current=!0},[r,...u])]);return{value:v.current,getValue:()=>v.current,onChange:w,ref:$}}function Lo(e={}){var t;const n=(t=e.store)==null?void 0:t.getState();return $n(Un(Bn({},e),{orientation:ht(e.orientation,n==null?void 0:n.orientation,"horizontal"),focusLoop:ht(e.focusLoop,n==null?void 0:n.focusLoop,!0)}))}function Ao(e,t,n){return Hn(e,t,n)}function tn(e={}){const[t,n]=Vn(Lo,e);return Ao(t,n,e)}var Fo="div",Po=qn(function(t){var n=t,{store:r,orientation:o,virtualFocus:s,focusLoop:a,rtl:i}=n,c=Wn(n,["store","orientation","virtualFocus","focusLoop","rtl"]);const u=Gn();r=r||u;const l=tn({store:r,orientation:o,virtualFocus:s,focusLoop:a,rtl:i}),p=l.useState(f=>f.orientation==="both"?void 0:f.orientation);return c=Qn(c,f=>b.jsx(Yn,{value:l,children:f}),[l]),c=gt({role:"toolbar","aria-orientation":p},c),c=Jn(gt({store:l},c)),c}),Ro=Kn(function(t){const n=Po(t);return zn(Fo,n)}),Oo=b.jsx(Xn,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsx(Zn,{d:"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z"})});function Do(e,t=[],n=10){const r=[];for(let o=0;o<t.length;o++){const s=t[o];let{keywords:a=[]}=s;if(typeof s.label=="string"&&(a=[...a,s.label]),!!a.some(c=>e.test(Ht(c)))&&(r.push(s),r.length===n))break}return r}function Io(e){return t=>{const[n,r]=m.useState([]);return m.useLayoutEffect(()=>{const{options:o,isDebounced:s}=e,a=er(()=>{const c=Promise.resolve(typeof o=="function"?o(t):o).then(u=>{if(c.canceled)return;const l=u.map((f,h)=>({key:`${e.name}-${h}`,value:f,label:e.getOptionLabel(f),keywords:e.getOptionKeywords?e.getOptionKeywords(f):[],isDisabled:e.isOptionDisabled?e.isOptionDisabled(f):!1})),p=new RegExp("(?:\\b|\\s|^)"+Vt(t),"i");r(Do(p,l))});return c},s?250:0),i=a();return()=>{a.cancel(),i&&(i.canceled=!0)}},[t]),[n]}}function xt({items:e,onSelect:t,selectedIndex:n,instanceId:r,listBoxId:o,className:s,Component:a="div"}){return b.jsx(a,{id:o,role:"listbox",className:"components-autocomplete__results",children:e.map((i,c)=>b.jsx(or,{id:`components-autocomplete-item-${r}-${i.key}`,role:"option",__next40pxDefaultSize:!0,"aria-selected":c===n,accessibleWhenDisabled:!0,disabled:i.isDisabled,className:_e("components-autocomplete__result",s,{"is-selected":c===n}),variant:c===n?"primary":void 0,onClick:()=>t(i),children:i.label},i.key))})}function Mo(e){var t;const n=(t=e.useItems)!==null&&t!==void 0?t:Io(e);function r({filterValue:o,instanceId:s,listBoxId:a,className:i,selectedIndex:c,onChangeOptions:u,onSelect:l,onReset:p,reset:f,contentRef:h}){const[d]=n(o),g=uo({editableContentElement:h.current}),[y,_]=m.useState(!1),E=m.useRef(null),v=be([E,se(w=>{h.current&&_(w.ownerDocument!==h.current.ownerDocument)},[h])]);No(E,f);const T=tr(Ie,500);function A(w){T&&(w.length?T(o?ge(vt("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",w.length),w.length):ge(vt("Initial %d result loaded. Type to filter all available results. Use up and down arrow keys to navigate.","Initial %d results loaded. Type to filter all available results. Use up and down arrow keys to navigate.",w.length),w.length),"assertive"):T(W("No results."),"assertive"))}return m.useLayoutEffect(()=>{u(d),A(d)},[d]),d.length===0?null:b.jsxs(b.Fragment,{children:[b.jsx(Ke,{focusOnMount:!1,onClose:p,placement:"top-start",className:"components-autocomplete__popover",anchor:g,ref:v,children:b.jsx(xt,{items:d,onSelect:l,selectedIndex:c,instanceId:s,listBoxId:a,className:i})}),h.current&&y&&nr.createPortal(b.jsx(xt,{items:d,onSelect:l,selectedIndex:c,instanceId:s,listBoxId:a,className:i,Component:rr}),h.current.ownerDocument.body)]})}return r}function No(e,t){m.useEffect(()=>{const n=r=>{!e.current||e.current.contains(r.target)||t(r)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[t,e])}const Be=e=>{if(e===null)return"";switch(typeof e){case"string":case"number":return e.toString();case"object":return e instanceof Array?e.map(Be).join(""):"props"in e?Be(e.props.children):"";default:return""}};var Ct=Be;const St=[],jo={};function $o({record:e,onChange:t,onReplace:n,completers:r,contentRef:o}){const s=Kt(jo),[a,i]=m.useState(0),[c,u]=m.useState(St),[l,p]=m.useState(""),[f,h]=m.useState(null),[d,g]=m.useState(null),y=m.useRef(!1);function _(C){if(f===null)return;const S=e.start,B=S-f.triggerPrefix.length-l.length,j=oe({html:ar(C)});t(z(e,j,B,S))}function E(C){var B;const{getOptionCompletion:S}=f||{};if(!C.isDisabled){if(S){const j=S(C.value,l),K=(q=>q!==null&&typeof q=="object"&&"action"in q&&q.action!==void 0&&"value"in q&&q.value!==void 0)(j)?j:{action:"insert-at-caret",value:j};if(K.action==="replace"){n([K.value]);return}else K.action==="insert-at-caret"&&_(K.value)}v(),(B=o.current)==null||B.focus()}}function v(){i(0),u(St),p(""),h(null),g(null)}function T(C){i(C.length===c.length?a:0),u(C)}function A(C){if(y.current=C.key==="Backspace",!!f&&c.length!==0&&!C.defaultPrevented){switch(C.key){case"ArrowUp":{const S=(a===0?c.length:a)-1;i(S),bt()&&Ie(Ct(c[S].label),"assertive");break}case"ArrowDown":{const S=(a+1)%c.length;i(S),bt()&&Ie(Ct(c[S].label),"assertive");break}case"Escape":h(null),g(null),C.preventDefault();break;case"Enter":E(c[a]);break;case"ArrowLeft":case"ArrowRight":v();return;default:return}C.preventDefault()}}const w=m.useMemo(()=>ae(e)?me($e(e,0)):"",[e]);m.useEffect(()=>{if(!w){f&&v();return}const C=r.reduce((ee,fe)=>{const Qe=w.lastIndexOf(fe.triggerPrefix),te=ee!==null?w.lastIndexOf(ee.triggerPrefix):-1;return Qe>te?fe:ee},null);if(!C){f&&v();return}const{allowContext:S,triggerPrefix:B}=C,j=w.lastIndexOf(B),M=w.slice(j+B.length);if(M.length>50)return;const q=c.length===0,ie=M.split(/\s/),Te=ie.length===1,xe=y.current&&ie.length<=3;if(q&&!(xe||Te)){f&&v();return}const X=me($e(e,void 0,me(e).length));if(S&&!S(w.slice(0,j),X)){f&&v();return}if(/^\s/.test(M)||/\s\s+$/.test(M)){f&&v();return}if(!/[\u0000-\uFFFF]*$/.test(M)){f&&v();return}const Ce=Vt(C.triggerPrefix),ce=Ht(w),ue=ce.slice(ce.lastIndexOf(C.triggerPrefix)).match(new RegExp(`${Ce}([\0-￿]*)$`)),le=ue&&ue[1];h(C),g(()=>C!==f?Mo(C):d),p(le===null?"":le)},[w]);const{key:P=""}=c[a]||{},{className:I}=f||{},$=!!f&&c.length>0,x=$?`components-autocomplete-listbox-${s}`:void 0,R=$?`components-autocomplete-item-${s}-${P}`:null,N=e.start!==void 0,U=!!w&&N&&!!d;return{listBoxId:x,activeId:R,onKeyDown:sr(A),popover:U&&b.jsx(d,{className:I,filterValue:l,instanceId:s,listBoxId:x,selectedIndex:a,onChangeOptions:T,onSelect:E,value:e,contentRef:o,reset:v})}}function Uo(e){const t=m.useRef(new Set);return t.current.add(e),t.current.size>2&&t.current.delete(Array.from(t.current)[0]),Array.from(t.current)[0]}function Bo(e){const t=m.useRef(null),n=m.useRef(),{record:r}=e,o=Uo(r),{popover:s,listBoxId:a,activeId:i,onKeyDown:c}=$o({...e,contentRef:t});n.current=c;const u=be([t,se(p=>{function f(h){var d;(d=n.current)==null||d.call(n,h)}return p.addEventListener("keydown",f),()=>{p.removeEventListener("keydown",f)}},[])]);return r.text!==(o==null?void 0:o.text)?{ref:u,children:s,"aria-autocomplete":a?"list":void 0,"aria-owns":a,"aria-activedescendant":i}:{ref:u}}function Vo({label:e,...t},n){const r=tn({focusLoop:!0,rtl:ir()});return b.jsx(cr.Provider,{value:r,children:b.jsx(Ro,{ref:n,"aria-label":e,store:r,...t})})}const Ho=m.forwardRef(Vo);var Ko=Ho;function qo({className:e,label:t,variant:n,...r},o){const s=n!==void 0,a=m.useMemo(()=>s?{}:{DropdownMenu:{variant:"toolbar"},Dropdown:{variant:"toolbar"},Menu:{variant:"toolbar"}},[s]);if(!t){Z("Using Toolbar without label prop",{since:"5.6",alternative:"ToolbarGroup component",link:"https://developer.wordpress.org/block-editor/components/toolbar/"});const{title:c,...u}=r;return b.jsx(qt,{isCollapsed:!1,...u,className:e})}const i=_e("components-accessible-toolbar",e,n&&`is-${n}`);return b.jsx(ur,{value:a,children:b.jsx(Ko,{className:i,label:t,ref:o,...r})})}const zo=m.forwardRef(qo);var Wo=zo;function Go(e){let t;try{t=new URL(e,"http://example.com").search.substring(1)}catch{}if(t)return t}function nn(e){let t="";const n=Object.entries(e);let r;for(;r=n.shift();){let[o,s]=r;if(Array.isArray(s)||s&&s.constructor===Object){const i=Object.entries(s).reverse();for(const[c,u]of i)n.unshift([`${o}[${c}]`,u])}else s!==void 0&&(s===null&&(s=""),t+="&"+[o,String(s)].map(encodeURIComponent).join("="))}return t.substr(1)}function Qo(e){const t=/^\S+?(#[^\s\?]*)/.exec(e);if(t)return t[1]}function Yo(e){try{return decodeURIComponent(e)}catch{return e}}function Jo(e,t,n){const r=t.length,o=r-1;for(let s=0;s<r;s++){let a=t[s];!a&&Array.isArray(e)&&(a=e.length.toString()),a=["__proto__","constructor","prototype"].includes(a)?a.toUpperCase():a;const i=!isNaN(Number(t[s+1]));e[a]=s===o?n:e[a]||(i?[]:{}),Array.isArray(e[a])&&!i&&(e[a]={...e[a]}),e=e[a]}}function we(e){return(Go(e)||"").replace(/\+/g,"%20").split("&").reduce((t,n)=>{const[r,o=""]=n.split("=").filter(Boolean).map(Yo);if(r){const s=r.replace(/\]/g,"").split("[");Jo(t,s,o)}return t},Object.create(null))}function Q(e="",t){if(!t||!Object.keys(t).length)return e;const n=Qo(e)||"";let r=e.replace(n,"");const o=e.indexOf("?");return o!==-1&&(t=Object.assign(we(e),t),r=r.substr(0,o)),r+"?"+nn(t)+n}function Ve(e,t){return we(e)[t]}function kt(e,t){return Ve(e,t)!==void 0}function Lt(e,...t){const n=e.replace(/^[^#]*/,"");e=e.replace(/#.*/,"");const r=e.indexOf("?");if(r===-1)return e+n;const o=we(e),s=e.substr(0,r);t.forEach(c=>delete o[c]);const a=nn(o);return(a?s+"?"+a:s)+n}function At(e){const t=e.split("?"),n=t[1],r=t[0];return n?r+"?"+n.split("&").map(o=>o.split("=")).map(o=>o.map(decodeURIComponent)).sort((o,s)=>o[0].localeCompare(s[0])).map(o=>o.map(encodeURIComponent)).map(o=>o.join("=")).join("&"):r}const Xo=()=>{},Zo=9;function es(){return{name:"blocks",className:"block-editor-autocompleters__block",triggerPrefix:"/",useItems(e){const{rootClientId:t,selectedBlockId:n,prioritizedBlocks:r}=G(u=>{var T;const{getSelectedBlockClientId:l,getBlock:p,getBlockListSettings:f,getBlockRootClientId:h}=u(D),{getActiveBlockVariation:d}=u(pr),g=l(),{name:y,attributes:_}=p(g),E=d(y,_),v=h(g);return{selectedBlockId:E?`${y}/${E.name}`:y,rootClientId:v,prioritizedBlocks:(T=f(v))==null?void 0:T.prioritizedInserterBlocks}},[]),[o,s,a]=mr(t,Xo,!0),i=m.useMemo(()=>(e.trim()?hr(o,s,a,e):gr(zt(o,"frecency","desc"),r)).filter(l=>l.id!==n).slice(0,Zo),[e,n,o,s,a,r]);return[m.useMemo(()=>i.map(u=>{const{title:l,icon:p,isDisabled:f}=u;return{key:`block-${u.id}`,value:u,label:b.jsxs(b.Fragment,{children:[b.jsx(vr,{icon:p,showColors:!0},"icon"),l]}),isDisabled:f}}),[i])]},allowContext(e,t){return!(/\S/.test(e)||/\S/.test(t))},getOptionCompletion(e){const{name:t,initialAttributes:n,innerBlocks:r,syncStatus:o,blocks:s}=e;return{action:"replace",value:o==="unsynced"?(s??[]).map(a=>fr(a)):lr(t,n,dr(r))}}}}var ts=es();function ns(e){const t=(n,r)=>{const{headers:o={}}=n;for(const s in o)if(s.toLowerCase()==="x-wp-nonce"&&o[s]===t.nonce)return r(n);return r({...n,headers:{...o,"X-WP-Nonce":t.nonce}})};return t.nonce=e,t}var rs=ns;const os=(e,t)=>{let n=e.path,r,o;return typeof e.namespace=="string"&&typeof e.endpoint=="string"&&(r=e.namespace.replace(/^\/|\/$/g,""),o=e.endpoint.replace(/^\//,""),o?n=r+"/"+o:n=r),delete e.namespace,delete e.endpoint,t({...e,path:n})};var rn=os;const ss=e=>(t,n)=>rn(t,r=>{let o=r.url,s=r.path,a;return typeof s=="string"&&(a=e,e.indexOf("?")!==-1&&(s=s.replace("?","&")),s=s.replace(/^\//,""),typeof a=="string"&&a.indexOf("?")!==-1&&(s=s.replace("?","&")),o=a+s),n({...r,url:o})});var as=ss;function is(e){const t=Object.fromEntries(Object.entries(e).map(([n,r])=>[At(n),r]));return(n,r)=>{const{parse:o=!0}=n;let s=n.path;if(!s&&n.url){const{rest_route:c,...u}=we(n.url);typeof c=="string"&&(s=Q(c,u))}if(typeof s!="string")return r(n);const a=n.method||"GET",i=At(s);if(a==="GET"&&t[i]){const c=t[i];return delete t[i],Ft(c,!!o)}else if(a==="OPTIONS"&&t[a]&&t[a][i]){const c=t[a][i];return delete t[a][i],Ft(c,!!o)}return r(n)}}function Ft(e,t){if(t)return Promise.resolve(e.body);try{return Promise.resolve(new window.Response(JSON.stringify(e.body),{status:200,statusText:"OK",headers:e.headers}))}catch{return Object.entries(e.headers).forEach(([n,r])=>{n.toLowerCase()==="link"&&(e.headers[n]=r.replace(/<([^>]+)>/,(o,s)=>`<${encodeURI(s)}>`))}),Promise.resolve(t?e.body:new window.Response(JSON.stringify(e.body),{status:200,statusText:"OK",headers:e.headers}))}}var cs=is;const us=({path:e,url:t,...n},r)=>({...n,url:t&&Q(t,r),path:e&&Q(e,r)}),Pt=e=>e.json?e.json():Promise.reject(e),ls=e=>{if(!e)return{};const t=e.match(/<([^>]+)>; rel="next"/);return t?{next:t[1]}:{}},Rt=e=>{const{next:t}=ls(e.headers.get("link"));return t},fs=e=>{const t=!!e.path&&e.path.indexOf("per_page=-1")!==-1,n=!!e.url&&e.url.indexOf("per_page=-1")!==-1;return t||n},ds=async(e,t)=>{if(e.parse===!1||!fs(e))return t(e);const n=await He({...us(e,{per_page:100}),parse:!1}),r=await Pt(n);if(!Array.isArray(r))return r;let o=Rt(n);if(!o)return r;let s=[].concat(r);for(;o;){const a=await He({...e,path:void 0,url:o,parse:!1}),i=await Pt(a);s=s.concat(i),o=Rt(a)}return s};var on=ds;const ps=new Set(["PATCH","PUT","DELETE"]),ms="GET",hs=(e,t)=>{const{method:n=ms}=e;return ps.has(n.toUpperCase())&&(e={...e,headers:{...e.headers,"X-HTTP-Method-Override":n,"Content-Type":"application/json"},method:"POST"}),t(e)};var gs=hs;const vs=(e,t)=>(typeof e.url=="string"&&!kt(e.url,"_locale")&&(e.url=Q(e.url,{_locale:"user"})),typeof e.path=="string"&&!kt(e.path,"_locale")&&(e.path=Q(e.path,{_locale:"user"})),t(e));var bs=vs;async function sn(e){try{return await e.json()}catch{throw{code:"invalid_json",message:W("The response is not a valid JSON response.")}}}async function an(e,t=!0){return t?e.status===204?null:await sn(e):e}async function cn(e,t=!0){throw t?await sn(e):e}function _s(e){const t=!!e.method&&e.method==="POST";return(!!e.path&&e.path.indexOf("/wp/v2/media")!==-1||!!e.url&&e.url.indexOf("/wp/v2/media")!==-1)&&t}const ys=(e,t)=>{if(!_s(e))return t(e);let n=0;const r=5,o=s=>(n++,t({path:`/wp/v2/media/${s}/post-process`,method:"POST",data:{action:"create-image-subsizes"},parse:!1}).catch(()=>n<r?o(s):(t({path:`/wp/v2/media/${s}?force=true`,method:"DELETE"}),Promise.reject())));return t({...e,parse:!1}).catch(s=>{if(!(s instanceof globalThis.Response))return Promise.reject(s);const a=s.headers.get("x-wp-upload-attachment-id");return s.status>=500&&s.status<600&&a?o(a).catch(()=>e.parse!==!1?Promise.reject({code:"post_process",message:W("Media upload failed. If this is a photo or a large image, please scale it down and try again.")}):Promise.reject(s)):cn(s,e.parse)}).then(s=>an(s,e.parse))};var Es=ys;const ws=e=>(t,n)=>{if(typeof t.url=="string"){const r=Ve(t.url,"wp_theme_preview");r===void 0?t.url=Q(t.url,{wp_theme_preview:e}):r===""&&(t.url=Lt(t.url,"wp_theme_preview"))}if(typeof t.path=="string"){const r=Ve(t.path,"wp_theme_preview");r===void 0?t.path=Q(t.path,{wp_theme_preview:e}):r===""&&(t.path=Lt(t.path,"wp_theme_preview"))}return n(t)};var Ts=ws;const xs={Accept:"application/json, */*;q=0.1"},Cs={credentials:"include"},un=[bs,rn,gs,on];function Ss(e){un.unshift(e)}const ks=e=>{const{url:t,path:n,data:r,parse:o=!0,...s}=e;let{body:a,headers:i}=e;return i={...xs,...i},r&&(a=JSON.stringify(r),i["Content-Type"]="application/json"),globalThis.fetch(t||n||window.location.href,{...Cs,...s,body:a,headers:i}).then(u=>u.ok?an(u,o):cn(u,o),u=>{throw u&&u.name==="AbortError"?u:globalThis.navigator.onLine?{code:"fetch_error",message:W("Could not get a valid response from the server.")}:{code:"offline_error",message:W("Unable to connect. Please check your Internet connection.")}})};let ln=ks;function Ls(e){ln=e}const H=e=>un.reduceRight((n,r)=>o=>r(o,n),ln)(e).catch(n=>n.code!=="rest_cookie_invalid_nonce"?Promise.reject(n):globalThis.fetch(H.nonceEndpoint).then(r=>r.ok?r.text():Promise.reject(n)).then(r=>(H.nonceMiddleware.nonce=r,H(e))));H.use=Ss;H.setFetchHandler=Ls;H.createNonceMiddleware=rs;H.createPreloadingMiddleware=cs;H.createRootURLMiddleware=as;H.fetchAllMiddleware=on;H.mediaUploadMiddleware=Es;H.createThemePreviewMiddleware=Ts;var He=H;const As=10;function Fs(){return{name:"links",className:"block-editor-autocompleters__link",triggerPrefix:"[[",options:async e=>{let t=await He({path:Q("/wp/v2/search",{per_page:As,search:e,type:"post",order_by:"menu_order"})});return t=t.filter(n=>n.title!==""),t},getOptionKeywords(e){return[...e.title.split(/\s+/)]},getOptionLabel(e){return b.jsxs(b.Fragment,{children:[b.jsx(_r,{icon:e.subtype==="page"?yr:Oo},"icon"),br(e.title)]})},getOptionCompletion(e){return b.jsx("a",{href:e.url,children:e.title})}}}var Ps=Fs();const Rs=[];function Os({completers:e=Rs}){const{name:t}=ye();return m.useMemo(()=>{let n=[...e,Ps];return(t===Er()||wr(t,"__experimentalSlashInserter",!1))&&(n=[...n,ts]),Tr("editor.Autocomplete.completers")&&(n===e&&(n=n.map(r=>({...r}))),n=Wt("editor.Autocomplete.completers",n,t)),n},[e,t])}function Ds(e){return Bo({...e,completers:Os(e)})}function Is(e,t,{isDisabled:n=!1}={}){const r=m.useContext(xr),o=Cr(),s=m.useRef();m.useEffect(()=>{s.current=t},[t]),m.useEffect(()=>{if(n)return;function a(i){o(e,i)&&s.current(i)}return r.add(a),()=>{r.delete(a)}},[e,n,r])}function Ms(e){const t="toolbarItem";return!e.some(n=>!(t in n.dataset))}function Ot(e){return Array.from(e.querySelectorAll("[data-toolbar-item]:not([disabled])"))}function Dt(e){return e.contains(e.ownerDocument.activeElement)}function Ns(e){const[t]=Gt.tabbable.find(e);t&&t.focus({preventScroll:!0})}function js(e){const[n,r]=m.useState(!0),o=m.useCallback(()=>{const s=Gt.tabbable.find(e.current),a=Ms(s);a||Z("Using custom components as toolbar controls",{since:"5.6",alternative:"ToolbarItem, ToolbarButton or ToolbarDropdownMenu components",link:"https://developer.wordpress.org/block-editor/components/toolbar-button/#inside-blockcontrols"}),r(a)},[e]);return m.useLayoutEffect(()=>{const s=new window.MutationObserver(o);return s.observe(e.current,{childList:!0,subtree:!0}),()=>s.disconnect()},[o,n,e]),n}function $s({toolbarRef:e,focusOnMount:t,isAccessibleToolbar:n,defaultIndex:r,onIndexChange:o,shouldUseKeyboardFocusShortcut:s,focusEditorOnEscape:a}){const[i]=m.useState(t),[c]=m.useState(r),u=m.useCallback(()=>{Ns(e.current)},[e]);Is("core/block-editor/focus-toolbar",()=>{s&&u()}),m.useEffect(()=>{i&&u()},[n,i,u]),m.useEffect(()=>{const f=e.current;let h=0;return!i&&!Dt(f)&&(h=window.requestAnimationFrame(()=>{const d=Ot(f),g=c||0;d[g]&&Dt(f)&&d[g].focus({preventScroll:!0})})),()=>{if(window.cancelAnimationFrame(h),!o||!f)return;const g=Ot(f).findIndex(y=>y.tabIndex===0);o(g)}},[c,i,o,e]);const{getLastFocus:p}=kr(G(D));m.useEffect(()=>{const f=e.current;if(a){const h=d=>{const g=p();d.keyCode===Qt&&(g!=null&&g.current)&&(d.preventDefault(),g.current.focus())};return f.addEventListener("keydown",h),()=>{f.removeEventListener("keydown",h)}}},[a,p,e])}function Us({children:e,focusOnMount:t,focusEditorOnEscape:n=!1,shouldUseKeyboardFocusShortcut:r=!0,__experimentalInitialIndex:o,__experimentalOnIndexChange:s,orientation:a="horizontal",...i}){const c=m.useRef(),u=js(c);return $s({toolbarRef:c,focusOnMount:t,defaultIndex:o,onIndexChange:s,isAccessibleToolbar:u,shouldUseKeyboardFocusShortcut:r,focusEditorOnEscape:n}),u?b.jsx(Wo,{label:i["aria-label"],ref:c,orientation:a,...i,children:e}):b.jsx(Sr,{orientation:a,role:"toolbar",ref:c,...i,children:e})}const Bs={placement:"bottom-start"},Vs=()=>b.jsxs(b.Fragment,{children:[["bold","italic","link","unknown"].map(e=>b.jsx(_t,{name:`RichText.ToolbarControls.${e}`},e)),b.jsx(_t,{name:"RichText.ToolbarControls",children:e=>{if(!e.length)return null;const n=e.map(([{props:r}])=>r).some(({isActive:r})=>r);return b.jsx(Lr,{children:r=>b.jsx(Ar,{icon:Fr,label:W("More"),toggleProps:{...r,className:_e(r.className,{"is-pressed":n}),description:W("Displays more block tools")},controls:zt(e.map(([{props:o}])=>o),"title"),popoverProps:Bs})})}})]});var fn=Vs;function Hs({popoverAnchor:e}){return b.jsx(Ke,{placement:"top",focusOnMount:!1,anchor:e,className:"block-editor-rich-text__inline-format-toolbar",__unstableSlotName:"block-toolbar",children:b.jsx(Us,{className:"block-editor-rich-text__inline-format-toolbar-group","aria-label":W("Format tools"),children:b.jsx(qt,{children:b.jsx(fn,{})})})})}const Ks=({inline:e,editableContentElement:t})=>e?b.jsx(Hs,{popoverAnchor:t}):b.jsx(Pr,{group:"inline",children:b.jsx(fn,{})});var qs=Ks;function zs({html:e,value:t}){var s;const n=m.useRef(),r=!!((s=t.activeFormats)!=null&&s.length),{__unstableMarkLastChangeAsPersistent:o}=Ee(D);m.useLayoutEffect(()=>{if(!n.current){n.current=t.text;return}if(n.current!==t.text){const a=window.setTimeout(()=>{o()},1e3);return n.current=t.text,()=>{window.clearTimeout(a)}}o()},[e,r])}function Ws(e){return e(Or).getFormatTypes()}const Gs=new Set(["a","audio","button","details","embed","iframe","input","label","select","textarea","video"]);function Qs(e,t){return typeof e!="object"?{[t]:e}:Object.fromEntries(Object.entries(e).map(([n,r])=>[`${t}.${n}`,r]))}function It(e,t){return e[t]?e[t]:Object.keys(e).filter(n=>n.startsWith(t+".")).reduce((n,r)=>(n[r.slice(t.length+1)]=e[r],n),{})}function Ys({clientId:e,identifier:t,allowedFormats:n,withoutInteractiveFormatting:r,disableNoneEssentialFormatting:o=!1}){const s=G(Ws,[]),a=m.useMemo(()=>s.filter(({name:h,interactive:d,tagName:g,[Rr]:y})=>!(n&&!n.includes(h)||o&&!y||r&&(d||Gs.has(g)))),[s,n,o,r]),i=G(h=>a.reduce((d,g)=>g.__experimentalGetPropsForEditableTreePreparation?{...d,...Qs(g.__experimentalGetPropsForEditableTreePreparation(h,{richTextIdentifier:t,blockClientId:e}),g.name)}:d,{}),[a,e,t]),c=Ee(),u=[],l=[],p=[],f=[];for(const h in i)f.push(i[h]);return a.forEach(h=>{if(h.__experimentalCreatePrepareEditableTree){const d=h.__experimentalCreatePrepareEditableTree(It(i,h.name),{richTextIdentifier:t,blockClientId:e});h.__experimentalCreateOnChangeEditableValue?l.push(d):u.push(d)}if(h.__experimentalCreateOnChangeEditableValue){let d={};h.__experimentalGetPropsForEditableTreeChangeHandler&&(d=h.__experimentalGetPropsForEditableTreeChangeHandler(c,{richTextIdentifier:t,blockClientId:e}));const g=It(i,h.name);p.push(h.__experimentalCreateOnChangeEditableValue({...typeof g=="object"?g:{},...d},{richTextIdentifier:t,blockClientId:e}))}}),{formatTypes:a,prepareHandlers:u,valueHandlers:l,changeHandlers:p,dependencies:f}}const Js=["`",'"',"'","“”","‘’"];var Xs=e=>t=>{function n(r){const{inputType:o,data:s}=r,{value:a,onChange:i,registry:c}=e.current;if(o!=="insertText"||ae(a))return;const u=Wt("blockEditor.wrapSelectionSettings",Js).find(([A,w])=>A===s||w===s);if(!u)return;const[l,p=l]=u,f=a.start,h=a.end+l.length;let d=z(a,l,f,f);d=z(d,p,h,h);const{__unstableMarkLastChangeAsPersistent:g,__unstableMarkAutomaticChange:y}=c.dispatch(D);g(),i(d),y();const _={};for(const A in r)_[A]=r[A];_.data=p;const{ownerDocument:E}=t,{defaultView:v}=E,T=new v.InputEvent("input",_);window.queueMicrotask(()=>{r.target.dispatchEvent(T)}),r.preventDefault()}return t.addEventListener("beforeinput",n),()=>{t.removeEventListener("beforeinput",n)}};function Zs(e){const t="tales of gutenberg",n=" 🐡🐢🦀🐤🦋🐘🐧🐹🦁🦄🦍🐼🐿🎃🐴🐝🐆🦕🦔🌱🍇π🍌🐉💧🥨🌌🍂🍠🥦🥚🥝🎟🥥🥒🛵🥖🍒🍯🎾🎲🐺🐚🐮⌛️",{start:r,text:o}=e;return r<t.length||o.slice(r-t.length,r).toLowerCase()!==t?e:z(e,n)}function dn(e){let t=e.length;for(;t--;){const n=Mr(e[t].attributes);if(n)return e[t].attributes[n]=e[t].attributes[n].toString().replace(Yt,""),[e[t].clientId,n,0,0];const r=dn(e[t].innerBlocks);if(r)return r}return[]}var ea=e=>t=>{function n(){const{getValue:o,onReplace:s,selectionChange:a,registry:i}=e.current;if(!s)return;const c=o(),{start:u,text:l}=c;if(l.slice(u-1,u)!==" ")return;const f=l.slice(0,u).trim(),h=Dr("from").filter(({type:_})=>_==="prefix"),d=Ir(h,({prefix:_})=>f===_);if(!d)return;const g=ve({value:z(c,Yt,0,u)}),y=d.transform(g);return a(...dn([y])),s([y]),i.dispatch(D).__unstableMarkAutomaticChange(),!0}function r(o){const{inputType:s,type:a}=o,{getValue:i,onChange:c,__unstableAllowPrefixTransformations:u,formatTypes:l,registry:p}=e.current;if(s!=="insertText"&&a!=="compositionend"||u&&n())return;const f=i(),h=l.reduce((y,{__unstableInputRule:_})=>(_&&(y=_(y)),y),Zs(f)),{__unstableMarkLastChangeAsPersistent:d,__unstableMarkAutomaticChange:g}=p.dispatch(D);h!==f&&(d(),c({...h,activeFormats:f.activeFormats}),g())}return t.addEventListener("input",r),t.addEventListener("compositionend",r),()=>{t.removeEventListener("input",r),t.removeEventListener("compositionend",r)}},ta=e=>t=>{function n(r){if(r.inputType!=="insertReplacementText")return;const{registry:o}=e.current;o.dispatch(D).__unstableMarkLastChangeAsPersistent()}return t.addEventListener("beforeinput",n),()=>{t.removeEventListener("beforeinput",n)}},na=()=>e=>{function t(n){(Pe.primary(n,"z")||Pe.primary(n,"y")||Pe.primaryShift(n,"z"))&&n.preventDefault()}return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},ra=e=>t=>{const{keyboardShortcuts:n}=e.current;function r(o){for(const s of n.current)s(o)}return t.addEventListener("keydown",r),()=>{t.removeEventListener("keydown",r)}},oa=e=>t=>{const{inputEvents:n}=e.current;function r(o){for(const s of n.current)s(o)}return t.addEventListener("input",r),()=>{t.removeEventListener("input",r)}},sa=e=>t=>{function n(r){const{keyCode:o}=r;if(r.defaultPrevented||o!==he&&o!==Qt)return;const{registry:s}=e.current,{didAutomaticChange:a,getSettings:i}=s.select(D),{__experimentalUndo:c}=i();c&&a()&&(r.preventDefault(),c())}return t.addEventListener("keydown",n),()=>{t.removeEventListener("keydown",n)}};function aa(e,t){if(t!=null&&t.length){let n=e.formats.length;for(;n--;)e.formats[n]=[...t,...e.formats[n]||[]]}}function pn(e){if(!(e!==!0&&e!=="p"&&e!=="li"))return e===!0?"p":e}function qe({allowedFormats:e,disableFormats:t}){return t?qe.EMPTY_ARRAY:e}qe.EMPTY_ARRAY=[];var ia=e=>t=>{function n(o){const{disableFormats:s,onChange:a,value:i,formatTypes:c,tagName:u,onReplace:l,__unstableEmbedURLOnPaste:p,preserveWhiteSpace:f,pastePlainText:h}=e.current;if(!t.contains(o.target)||o.defaultPrevented)return;const{plainText:d,html:g}=Nr(o);if(o.preventDefault(),window.console.log(`Received HTML:

`,g),window.console.log(`Received plain text:

`,d),s){a(z(i,d));return}const y=o.clipboardData.getData("rich-text")==="true";function _(A){const w=c.reduce((P,{__unstablePasteRule:I})=>(I&&P===i&&(P=I(i,{html:g,plainText:d})),P),i);if(w!==i)a(w);else{const P=oe({html:A});aa(P,i.activeFormats),a(z(i,P))}}if(y){_(g);return}if(h){a(z(i,oe({text:d})));return}let E="INLINE";const v=d.trim();p&&je(i)&&jr(v)&&/^https?:/.test(v)&&(E="BLOCKS");const T=$r({HTML:g,plainText:d,mode:E,tagName:u});typeof T=="string"?_(T):T.length>0&&l&&je(i)&&l(T,T.length-1,-1)}const{defaultView:r}=t.ownerDocument;return r.addEventListener("paste",n),()=>{r.removeEventListener("paste",n)}},ca=e=>t=>{function n(r){const{keyCode:o}=r;if(r.defaultPrevented)return;const{value:s,onMerge:a,onRemove:i}=e.current;if(o===$t||o===he){const{start:c,end:u,text:l}=s,p=o===he,f=s.activeFormats&&!!s.activeFormats.length;if(!ae(s)||f||p&&c!==0||!p&&u!==l.length)return;a?a(!p):i&&je(s)&&p&&i(!p),r.preventDefault()}}return t.addEventListener("keydown",n),()=>{t.removeEventListener("keydown",n)}},ua=e=>t=>{function n(s){if(s.keyCode!==Me)return;const{onReplace:a,onSplit:i}=e.current;a&&i&&(s.__deprecatedOnSplit=!0)}function r(s){if(s.defaultPrevented||s.target!==t||s.keyCode!==Me)return;const{value:a,onChange:i,disableLineBreaks:c,onSplitAtEnd:u,onSplitAtDoubleLineEnd:l,registry:p}=e.current;s.preventDefault();const{text:f,start:h,end:d}=a;s.shiftKey?c||i(z(a,`
`)):u&&h===d&&d===f.length?u():l&&h===d&&d===f.length&&f.slice(-2)===`

`?p.batch(()=>{const g={...a};g.start=g.end-2,i(Ut(g)),l()}):c||i(z(a,`
`))}const{defaultView:o}=t.ownerDocument;return o.addEventListener("keydown",r),t.addEventListener("keydown",n),()=>{o.removeEventListener("keydown",r),t.removeEventListener("keydown",n)}},la=e=>t=>{function n(){const{registry:r}=e.current;if(!r.select(D).isMultiSelecting())return;const o=t.parentElement.closest('[contenteditable="true"]');o&&o.focus()}return t.addEventListener("focus",n),()=>{t.removeEventListener("focus",n)}};const fa=[Xs,ea,ta,na,ra,oa,sa,ia,ca,ua,la];function da(e){const t=m.useRef(e);m.useInsertionEffect(()=>{t.current=e});const n=m.useMemo(()=>fa.map(r=>r(t)),[t]);return se(r=>{if(!e.isSelected)return;const o=n.map(s=>s(r));return()=>{o.forEach(s=>s())}},[n,e.isSelected])}const pa={},ma=Symbol("usesContext");function ha({onChange:e,onFocus:t,value:n,forwardedRef:r,settings:o}){const{name:s,edit:a,[ma]:i}=o,c=m.useContext(Jt),u=m.useMemo(()=>i?Object.fromEntries(Object.entries(c).filter(([d])=>i.includes(d))):pa,[i,c]);if(!a)return null;const l=zr(n,s),p=l!==void 0,f=Wr(n),h=f!==void 0&&f.type===s;return b.jsx(a,{isActive:p,activeAttributes:p?l.attributes||{}:{},isObjectActive:h,activeObjectAttributes:h?f.attributes||{}:{},value:n,onChange:e,onFocus:t,contentRef:r,context:u},s)}function ga({formatTypes:e,...t}){return e.map(n=>m.createElement(ha,{settings:n,...t,key:n.name}))}function mn(e,t){if(_n.isEmpty(e)){const n=pn(t);return n?`<${n}></${n}>`:""}return Array.isArray(e)?(Z("wp.blockEditor.RichText value prop as children type",{since:"6.1",version:"6.3",alternative:"value prop as string",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),Ne.toHTML(e)):typeof e=="string"?e:e.toHTMLString()}function hn({value:e,tagName:t,multiline:n,format:r,...o}){return e=b.jsx(Ur,{children:mn(e,n)}),t?b.jsx(t,{...o,children:e}):e}function va({children:e,identifier:t,tagName:n="div",value:r="",onChange:o,multiline:s,...a},i){Z("wp.blockEditor.RichText multiline prop",{since:"6.1",version:"6.3",alternative:"nested blocks (InnerBlocks)",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/nested-blocks-inner-blocks/"});const{clientId:c}=ye(),{getSelectionStart:u,getSelectionEnd:l}=G(D),{selectionChange:p}=Ee(D),f=pn(s);r=r||`<${f}></${f}>`;const d=`</${f}>${r}<${f}>`.split(`</${f}><${f}>`);d.shift(),d.pop();function g(y){o(`<${f}>${y.join(`</${f}><${f}>`)}</${f}>`)}return b.jsx(n,{ref:i,children:d.map((y,_)=>b.jsx(ze,{identifier:`${t}-${_}`,tagName:f,value:y,onChange:E=>{const v=d.slice();v[_]=E,g(v)},isSelected:void 0,onKeyDown:E=>{if(E.keyCode!==Me)return;E.preventDefault();const{offset:v}=u(),{offset:T}=l();if(typeof v!="number"||typeof T!="number")return;const A=oe({html:y});A.start=v,A.end=T;const w=Qr(A).map(I=>ve({value:I})),P=d.slice();P.splice(_,1,...w),g(P),p(c,`${t}-${_+1}`,0,0)},onMerge:E=>{const v=d.slice();let T=0;if(E){if(!v[_+1])return;v.splice(_,2,v[_]+v[_+1]),T=v[_].length-1}else{if(!v[_-1])return;v.splice(_-1,2,v[_-1]+v[_]),T=v[_-1].length-1}g(v),p(c,`${t}-${_-(E?0:1)}`,T,T)},...a},_))})}var ba=m.forwardRef(va);function _a(e){return m.forwardRef((t,n)=>{let r=t.value,o=t.onChange;Array.isArray(r)&&(Z("wp.blockEditor.RichText value prop as children type",{since:"6.1",version:"6.3",alternative:"value prop as string",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),r=Ne.toHTML(t.value),o=a=>t.onChange(Ne.fromDOM(jt(document,a).childNodes)));const s=t.multiline?ba:e;return b.jsx(s,{...t,value:r,onChange:o,ref:n})})}const gn=m.createContext();gn.displayName="keyboardShortcutContext";const vn=m.createContext();vn.displayName="inputEventContext";const Mt=Symbol("instanceId");function bn(e){const{__unstableMobileNoFocusOnMount:t,deleteEnter:n,placeholderTextColor:r,textAlign:o,selectionColor:s,tagsToEliminate:a,disableEditingMenu:i,fontSize:c,fontFamily:u,fontWeight:l,fontStyle:p,minWidth:f,maxWidth:h,disableSuggestions:d,disableAutocorrection:g,...y}=e;return y}function ze({children:e,tagName:t="div",value:n="",onChange:r,isSelected:o,multiline:s,inlineToolbar:a,wrapperClassName:i,autocompleters:c,onReplace:u,placeholder:l,allowedFormats:p,withoutInteractiveFormatting:f,onRemove:h,onMerge:d,onSplit:g,__unstableOnSplitAtEnd:y,__unstableOnSplitAtDoubleLineEnd:_,identifier:E,preserveWhiteSpace:v,__unstablePastePlainText:T,__unstableEmbedURLOnPaste:A,__unstableDisableFormats:w,disableLineBreaks:P,__unstableAllowPrefixTransformations:I,readOnly:$,...x},R){var rt;x=bn(x),g&&Z("wp.blockEditor.RichText onSplit prop",{since:"6.4",alternative:'block.json support key: "splitting"'});const N=Kt(ze),U=m.useRef(),C=ye(),{clientId:S,isSelected:B,name:j}=C,M=C[Vr],K=m.useContext(Jt),q=Bt(),ie=L=>{if(!B)return{isSelected:!1};const{getSelectionStart:O,getSelectionEnd:F,getBlockEditingMode:k}=L(D),V=O(),Y=F();let J;return o===void 0?J=V.clientId===S&&Y.clientId===S&&(E?V.attributeKey===E:V[Mt]===N):o&&(J=V.clientId===S),{selectionStart:J?V.offset:void 0,selectionEnd:J?Y.offset:void 0,isSelected:J,isContentOnly:k(S)==="contentOnly"}},{selectionStart:Te,selectionEnd:xe,isSelected:X,isContentOnly:Ce}=G(ie,[S,E,N,o,B]),{disableBoundBlock:ce,bindingsPlaceholder:ue,bindingsLabel:le}=G(L=>{var at,it,ct,ut,lt,ft;const{__experimentalBlockBindingsSupportedAttributes:O}=L(D).getSettings();if(!(M!=null&&M[E])||!(j in O))return{};const F=M[E],k=Hr(F.source),V={};if((at=k==null?void 0:k.usesContext)!=null&&at.length)for(const Fe of k.usesContext)V[Fe]=K[Fe];const Y=!((it=k==null?void 0:k.canUserEditValue)!=null&&it.call(k,{select:L,context:V,args:F.args}));if(n.length>0)return{disableBoundBlock:Y,bindingsPlaceholder:null,bindingsLabel:null};const{getBlockAttributes:J}=L(D),Ae=J(S);let ot=null;k!=null&&k.editorUI&&(ot=(ut=(ct=k.editorUI({select:L,context:V}).data)==null?void 0:ct.find(On=>Kr(On.args,F==null?void 0:F.args)))==null?void 0:ut.label);const st=ot??(k==null?void 0:k.label),Pn=Y?st:ge(W("Add %s"),st),Rn=Y?((lt=F==null?void 0:F.args)==null?void 0:lt.key)||(k==null?void 0:k.label):ge(W("Empty %s; start writing to edit its value"),((ft=F==null?void 0:F.args)==null?void 0:ft.key)||(k==null?void 0:k.label));return{disableBoundBlock:Y,bindingsPlaceholder:(Ae==null?void 0:Ae.placeholder)||Pn,bindingsLabel:Rn}},[M,E,j,n,S,K]),ee=!!(K!=null&&K["pattern/overrides"]),fe=((rt=M==null?void 0:M.__default)==null?void 0:rt.source)==="core/pattern-overrides",te=$||ce||ee&&!fe,{getSelectionStart:Ye,getSelectionEnd:Je,getBlockRootClientId:ne}=G(D),{selectionChange:Se}=Ee(D),ke=qe({allowedFormats:p,disableFormats:w}),yn=!ke||ke.length>0,En=m.useCallback((L,O)=>{const F={},k=L===void 0&&O===void 0,V={clientId:S,[E?"attributeKey":Mt]:E||N};if(typeof L=="number"||k){if(O===void 0&&ne(S)!==ne(Je().clientId))return;F.start={...V,offset:L}}if(typeof O=="number"||k){if(L===void 0&&ne(S)!==ne(Ye().clientId))return;F.end={...V,offset:O}}Se(F)},[S,ne,Je,Ye,E,N,Se]),{formatTypes:Le,prepareHandlers:wn,valueHandlers:Tn,changeHandlers:xn,dependencies:Cn}=Ys({clientId:S,identifier:E,allowedFormats:ke,withoutInteractiveFormatting:f,disableNoneEssentialFormatting:Ce});function Sn(L){return Tn.reduce((O,F)=>F(O,L.text),L.formats)}function Xe(L){return Le.forEach(O=>{O.__experimentalCreatePrepareEditableTree&&(L=Gr(L,O.name,0,L.text.length))}),L.formats}function kn(L){return wn.reduce((O,F)=>F(O,L.text),L.formats)}const{value:re,getValue:Ln,onChange:de,ref:An}=ko({value:n,onChange(L,{__unstableFormats:O,__unstableText:F}){r(L),Object.values(xn).forEach(k=>{k(O,F)})},selectionStart:Te,selectionEnd:xe,onSelectionChange:En,placeholder:ue||l,__unstableIsSelected:X,__unstableDisableFormats:w,preserveWhiteSpace:v,__unstableDependencies:[...Cn,t],__unstableAfterParse:Sn,__unstableBeforeSerialize:Xe,__unstableAddInvisibleFormats:kn}),Ze=Ds({onReplace:u,completers:c,record:re,onChange:de});zs({html:n,value:re});const et=m.useRef(new Set),tt=m.useRef(new Set);function nt(){var L;(L=U.current)==null||L.focus()}const Fn=t;return b.jsxs(b.Fragment,{children:[X&&b.jsx(gn.Provider,{value:et,children:b.jsx(vn.Provider,{value:tt,children:b.jsxs(Ke.__unstableSlotNameProvider,{value:"__unstable-block-tools-after",children:[e&&e({value:re,onChange:de,onFocus:nt}),b.jsx(ga,{value:re,onChange:de,onFocus:nt,formatTypes:Le,forwardedRef:U})]})})}),X&&yn&&b.jsx(qs,{inline:a,editableContentElement:U.current}),b.jsx(Fn,{role:"textbox","aria-multiline":!P,"aria-readonly":te,...x,draggable:void 0,"aria-label":le||x["aria-label"]||l,...Ze,ref:be([An,R,Ze.ref,x.ref,da({registry:q,getValue:Ln,onChange:de,__unstableAllowPrefixTransformations:I,formatTypes:Le,onReplace:u,selectionChange:Se,isSelected:X,disableFormats:w,value:re,tagName:t,onSplit:g,__unstableEmbedURLOnPaste:A,pastePlainText:T,onMerge:d,onRemove:h,removeEditorOnlyFormats:Xe,disableLineBreaks:P,onSplitAtEnd:y,onSplitAtDoubleLineEnd:_,keyboardShortcuts:et,inputEvents:tt}),U]),contentEditable:!te,suppressContentEditableWarning:!0,className:_e("block-editor-rich-text__editable",x.className,"rich-text"),tabIndex:x.tabIndex===0&&!te?null:x.tabIndex,"data-wp-block-attribute-key":E})]})}const We=_a(m.forwardRef(ze));We.Content=hn;We.isEmpty=e=>!e||e.length===0;const Ge=m.forwardRef((e,t)=>{if(ye()[Br]){const{children:o,tagName:s="div",value:a,onChange:i,isSelected:c,multiline:u,inlineToolbar:l,wrapperClassName:p,autocompleters:f,onReplace:h,placeholder:d,allowedFormats:g,withoutInteractiveFormatting:y,onRemove:_,onMerge:E,onSplit:v,__unstableOnSplitAtEnd:T,__unstableOnSplitAtDoubleLineEnd:A,identifier:w,preserveWhiteSpace:P,__unstablePastePlainText:I,__unstableEmbedURLOnPaste:$,__unstableDisableFormats:x,disableLineBreaks:R,__unstableAllowPrefixTransformations:N,readOnly:U,...C}=bn(e);return b.jsx(s,{...C,dangerouslySetInnerHTML:{__html:mn(a,u)}})}return b.jsx(We,{ref:t,...e,readOnly:!1})});Ge.Content=hn;Ge.isEmpty=e=>!e||e.length===0;var _n=Ge;qr("cwp/example-static",{edit:({attributes:e,setAttributes:t})=>{const n=yt(),{message:r}=e;return b.jsx("div",{...n,children:b.jsx(_n,{tagName:"p",value:r,onChange:o=>t({message:o}),placeholder:"Enter message..."})})},save:({attributes:e})=>{const t=yt.save(),{message:n}=e;return b.jsx("div",{...t,children:b.jsx("p",{children:n})})}});
